# [Lighter] 1월 3주차 진행계획

![/Lighter_Factory_Proj/문서작업/회의록/1월 3주차 진행계획/Untitled.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled.png)

![/Lighter_Factory_Proj/문서작업/회의록/1월 3주차 진행계획/Untitled 1.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%201.png)

- 트렐로(Trello) 라는 협업툴을 이용하여 크게 4개 section으로 나눠서 프로젝트를 문서화하면서 진행하기로 했습니다. (링크: [https://trello.com/b/IKZItqPQ/wbs-work-breakdown-structure](https://trello.com/b/IKZItqPQ/wbs-work-breakdown-structure))
- 1월 4주차 공장 견학 때 저희가 갖춰야 하는 모습을 간략하게나마 생각한 뒤 위 같은 모습을 갖추기 위해 해야하는 작업들을 역순으로 정리하며 금주에 할 일을 정했습니다.

# 1. 카메라 최적 환경설정

![Lighter_Factory_Proj/문서작업/회의록/1월 3주차 진행계획/Untitled 2.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%202.png)

- 새로운 카메라와 렌즈를 도입함으로써 여러 설정값이 변경됐습니다.
    - [ ]  사용가능한 카메라들 중 가장 저렴하고 성능 좋은 제품 찾기
        - 작년 여름에 새롭게 출시된 **Raspberry Pi Camera HQ 모델**에 렌즈를 부착해서 사용하기로 했습니다.
        - 기존 800만 화소에서 1230만 화소로 업그레이드 되어 **화질에 큰 개선**이 있습니다.
    - [ ]  광각 또는 망원 렌즈에 대한 자료조사 및 상품 선택하기
        - 솔루션에 사용할 적절한 렌즈를 찾기 위해 위 세 가지 렌즈를 비교하며 실험하겠습니다.
            1. M12 광각 렌즈: 넓은 범위를 우수한 화질로 잡아낼 수 있다는 장점이 있지만 apature과 focal length를 조절할 수가 없고 너무 FOV가 넓어서 좌우 왜곡이 심하고 다른 라이터 세트까지 인식할 우려가 있다는 단점이 있습니다.
            2. 12mm 망원 렌즈: 가장 뛰어난 화질을 보여주며 멀리있는 라이터 세트를 가까이 있는 것처럼 보여줍니다. 가스양 솔루션에 적절할 것으로 예상됩니다. 촬영 테스팅 결과 라이터 세트로부터 약 55cm 떨어진 곳에서 촬영해야 프레임에 적절하게 들어옵니다.
            3. 6mm 광각 렌즈: 화소는 낮지만 가까운 거리에서도 하나의 라이터 세트가 온전하게 잘 보여 공장에 설치하기 알맞아 보입니다. 촬영 테스팅 결과 라이터 세트로부터 약 20cm 떨어진 곳에서 촬영하니 적절합니다.
    - [ ]  각 솔루션 별 설치되는 적정 위치 (거리 및 높이) 측정하기
        - 사용할 카메라와 렌즈가 솔루션 별로 정확하게 확정되면, 새롭게 변한 가스양 공정에 대해 새로운 머신러닝을 돌려야 합니다. 금주에 현장 데이터 확보를 위해 공장을 다녀올 예정입니다.
        - 공장에서 적정한 거리와 높이를 측정하겠습니다.
    - [ ]  카메라 캘리브레이션 수행하기
        - 일반적인 렌즈, 특히 **광각 렌즈**의 경우 프레임 가장자리가 왜곡이 심하게 일어나서 직선이 곡선처럼 보이게 됩니다. 이 문제를 해결하기 위해 **카메라 캘리브레이션**을 수행해서 왜곡 계수 (distortion efficient)를 찾아내서 개선했습니다.

            ![%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%203.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%203.png)

            ![%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%204.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%204.png)

            ![%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%205.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%205.png)

# 2. 스티커 솔루션 성능 개선

- 기존 스티커 솔루션에서는 정지한 피사체에 대해 계속해서 불량 여부를 판단
    - 원인 1. 현재 솔루션은 서로 다른 두 라이터 세트를 구별하지 못하기 때문에 판단이 끝난 라이터 세트와 새롭게 들어오는 라이터 세트를 구분하지 못합니다.
    - 원인 2. 초당 7, 8장의 사진을 local에 저장한 뒤 저장한 사진에 대해서 판단하는 과정이 큰 오버헤드입니다.
- 스티커 솔루션에서 빠른 프레임을 확보하기 위해 성능 개선 방안을 설계하고 적용하겠습니다.

    ![%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%206.png](%5BLighter%5D%201%E1%84%8B%E1%85%AF%E1%86%AF%203%E1%84%8C%E1%85%AE%E1%84%8E%E1%85%A1%20%E1%84%8C%E1%85%B5%E1%86%AB%E1%84%92%E1%85%A2%E1%86%BC%E1%84%80%E1%85%A8%E1%84%92%E1%85%AC%E1%86%A8%20eded9d1e08b3429b8d10c6fc3f68ab14/Untitled%206.png)

- 현재 스티커 솔루션의 알고리즘으로는 위 오류 상황에 대해 불량 여부를 올바르게 판단하지 못합니다.
- 5, 6번째 라이터에 붙은 스티커가 head를 가리기 때문에 불량품이라고 판단하지만, 그 이외의 라이터는 모두 정상이라고 판단하는 것을 근거로 솔루션에 개선이 필요하다고 판단했습니다.

# 3. 외부신호 제어 flow 적용

- 외부신호를 통해 솔루션을 제어할 수 있도록 만들어달라는 업체의 요구사항이 있었습니다.
- Jetson nano의 datasheet를 참고하면서 외부신호가 들어올 때 사진을 찍고 판단하도록 제어 flow를 만들고 있습니다.
- 외부신호로 제어할 경우 고질적인 어려운 이슈였던 **하나의 라이터 세트에 대해 하나의 결과만 나와야 한다**는 문제가 해결될 것으로 기대됩니다.

# 4. 가스양 솔루션 학습모델 새로 만들기

- 1절에서 언급했던 것과 같이 가스양 공정이 새롭게 변했기 때문에 머신러닝을 다시 수행해서 학습모델을 새로 만들 필요가 있습니다. 금주에 현장 데이터 확보를 위해 공장을 다녀올 예정입니다.
- 현장 사진을 최대한 확보한 뒤 가장 잘 나온 사진을 약 200장, 실내에서 촬영한 사진 약 200장 총 400장으로 학습을 수행할 예정입니다.
- 1월 4주차에 공장에 방문할 때 어떤 모습으로

# 5. 기타 :: 캡스톤 밸류업 중간발표 준비

- 1월 27일 수요일에 캡스톤 밸류업 중간발표가 예정되어 있습니다.
- 발표자료 잘 준비해서 반드시 1등 따낼수 있도록 하겠습니다.

# 6. 기타 :: 팜 밸류업 경진대회 시연영상 준비

- 1월 31일 일요일에 팜 밸류업 경진대회의 시연영상 업로드가 예정되어 있습니다.
- 최대한 솔루션 많이 개선하고 현장에서 사진과 영상 많이 찍어와서 이쁘게 영상 만들어서 업로드 하겠습니다.
